<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vivahit Pidit Sangh (VPS) | Stories</title>
  <meta name="description" content="Anonymous stories from men experiencing domestic violence. Share your experience safely.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üó£Ô∏è</text></svg>">
  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    import { firebaseConfig } from './assets/js/firebase-config.js';
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    window.db = getFirestore(app);
    window.firebaseReady = true;
    console.log('Firebase initialized');
  </script>
  <style>
    :root { font-family: 'Inter', sans-serif; }
    @supports (font-variation-settings: normal) {
      :root { font-family: 'Inter var', sans-serif; }
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-700">
  <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a class="text-xl font-bold text-slate-900" href="index.html">Vivahit Pidit Sangh (VPS)</a>
        <nav class="hidden md:flex items-center space-x-8" id="primary-nav">
          <a href="index.html" class="hover:text-sky-600 transition">Home</a>
          <a href="stories.html" class="text-sky-600 font-semibold">Stories</a>
          <a href="about.html" class="hover:text-sky-600 transition">About</a>
          <a href="team.html" class="hover:text-sky-600 transition">Team</a>
          <a href="news.html" class="hover:text-sky-600 transition">News</a>
          <a class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition" href="contact.html">Get Help</a>
        </nav>
        <button class="md:hidden text-slate-800" aria-label="Open menu" id="nav-toggle">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
      </div>
    </div>
    <!-- Mobile Nav -->
    <nav class="hidden md:hidden p-4 space-y-2" id="mobile-nav">
        <a href="index.html" class="block hover:text-sky-600 transition">Home</a>
        <a href="stories.html" class="block text-sky-600 font-semibold">Stories</a>
        <a href="about.html" class="block hover:text-sky-600 transition">About</a>
        <a href="team.html" class="block hover:text-sky-600 transition">Team</a>
        <a href="news.html" class="block hover:text-sky-600 transition">News</a>
        <a class="block bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition text-center" href="contact.html">Get Help</a>
      </nav>
  </header>

  <main>
    <section class="py-16 sm:py-24 bg-slate-100">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-slate-900 tracking-tight">Anonymous Stories</h1>
        <p class="mt-4 text-lg text-slate-600">Share safely. Read and support others at VPS. You are believed.</p>
      </div>
    </section>

    <section class="py-20 sm:py-24">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid lg:grid-cols-2 gap-16">
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Share Your Story</h2>
          <form id="story-form" class="mt-6 bg-white p-8 rounded-2xl shadow-lg border border-slate-200 space-y-4">
            <div>
              <label for="story-text" class="block text-sm font-medium text-slate-700">Your story (no names needed)</label>
              <textarea id="story-text" rows="6" placeholder="Write here..." required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"></textarea>
            </div>
            <div>
              <label for="story-feelings" class="block text-sm font-medium text-slate-700">How are you feeling?</label>
              <select id="story-feelings" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm">
                <option>Overwhelmed</option>
                <option>Scared</option>
                <option>Confused</option>
                <option>Hopeful</option>
                <option>Angry</option>
                <option>Sad</option>
              </select>
            </div>
            <button type="submit" class="w-full text-center bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-6 rounded-lg transition">Post Anonymously</button>
            <p class="text-sm text-slate-500">Submitted anonymously to our server. If offline, stored locally in your browser. For immediate help, call <a href="tel:+919876543210" class="font-semibold text-sky-600 hover:text-sky-700">+91 -9876543210</a>.</p>
          </form>
        </div>
        <div>
          <h2 class="text-2xl font-bold text-slate-900">Latest Stories</h2>
          <div id="stories-list" class="mt-6 space-y-8">
            <!-- Stories will be injected here by JS -->
            <p class="text-slate-600">Loading stories...</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-slate-100 border-t border-slate-200">
    <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <div class="text-lg font-bold text-slate-900">Vivahit Pidit Sangh (VPS)</div>
          <p class="mt-2 text-sm text-slate-600">Confidential support for men facing domestic and marital abuse.</p>
        </div>
        <div class="md:justify-self-center">
          <h3 class="font-semibold text-slate-900">Quick Links</h3>
          <ul class="mt-4 space-y-2">
            <li><a href="about.html" class="text-sm text-slate-600 hover:text-sky-600">About</a></li>
            <li><a href="team.html" class="text-sm text-slate-600 hover:text-sky-600">Team</a></li>
            <li><a href="stories.html" class="text-sm text-slate-600 hover:text-sky-600">Stories</a></li>
            <li><a href="news.html" class="text-sm text-slate-600 hover:text-sky-600">News</a></li>
            <li><a href="contact.html" class="text-sm text-slate-600 hover:text-sky-600">Contact</a></li>
          </ul>
        </div>
        <div class="md:justify-self-end">
          <h3 class="font-semibold text-slate-900">Contact Us</h3>
          <ul class="mt-4 space-y-2">
            <li class="text-sm text-slate-600">Hotline: <a href="tel:+919876543210" class="hover:text-sky-600">+91 -9876543210</a></li>
            <li class="text-sm text-slate-600">Email: <a href="mailto:help@menssupport.org" class="hover:text-sky-600">help@menssupport.org</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <script src="assets/js/main.js?v=2.2.3"></script>
  <script>
    // Wait for Firebase to initialize before calling initStories
    async function waitForFirebaseAndInit() {
      let attempts = 0;
      while (!window.firebaseReady && attempts < 50) {
        await new Promise(resolve => setTimeout(resolve, 100));
        attempts++;
      }
      
      if (window.firebaseReady && window.db) {
        window.MSN && window.MSN.initStories && window.MSN.initStories();
      } else {
        console.error('Firebase failed to initialize after 5 seconds');
      }
    }
    
    waitForFirebaseAndInit();
  </script>
</body>
</html>
